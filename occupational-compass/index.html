<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”××¦×¤×Ÿ ×”×ª×¢×¡×•×§×ª×™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rubik', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            min-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-bottom: 3px solid #764ba2;
        }

        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

        .logo img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            flex-wrap: wrap;
        }

        nav button {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        nav button.active {
            background: #667eea;
            color: white;
        }

        nav button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        nav button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .form-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        input[type="text"],
        input[type="email"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: 'Rubik', 'Arial', sans-serif;
            direction: rtl;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="number"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
        }

        button.btn {
            padding: 15px 40px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        button.btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
            max-width: 300px;
        }

        button.btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        button.btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            flex: 1;
            max-width: 300px;
        }

        button.btn-secondary:hover {
            background: #667eea;
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .step-indicator {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.95em;
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #c33;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .success-message {
            background: #efe;
            color: #3c3;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #3c3;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        .coming-soon {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .coming-soon h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #667eea;
        }

        .coming-soon p {
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .report-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            line-height: 1.8;
        }

        .report-section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }

        .report-section:last-child {
            border-bottom: none;
        }

        .report-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .report-section p {
            color: #333;
            margin-bottom: 10px;
        }

        .report-section li {
            color: #333;
            margin-bottom: 8px;
            margin-right: 20px;
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .api-key-section {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #ffc107;
        }

        .api-key-section label {
            color: #856404;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            nav {
                flex-direction: column;
            }

            nav button {
                width: 100%;
            }

            .button-group {
                flex-direction: column-reverse;
            }

            button.btn {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <div class="logo">
                    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- ×¨××© ×¢× ××•×— -->
                        <path d="M 100 30 Q 140 30 140 70 L 140 160 Q 100 180 60 160 L 60 70 Q 60 30 100 30" fill="#003d7a" opacity="0.8"/>
                        <!-- ×’×œ×’×œ×™ ×©×™× ×™×™× (AI) -->
                        <circle cx="70" cy="60" r="8" fill="#ff9800" opacity="0.7"/>
                        <circle cx="70" cy="90" r="8" fill="#ff9800" opacity="0.7"/>
                        <circle cx="70" cy="120" r="8" fill="#ff9800" opacity="0.7"/>
                        <!-- ×§×•×•×™× -->
                        <line x1="78" y1="60" x2="95" y2="65" stroke="#ff9800" stroke-width="2" opacity="0.7"/>
                        <line x1="78" y1="90" x2="95" y2="90" stroke="#ff9800" stroke-width="2" opacity="0.7"/>
                        <line x1="78" y1="120" x2="95" y2="115" stroke="#ff9800" stroke-width="2" opacity="0.7"/>
                        <!-- ×ª×™×§ (×§×•"×—/×”×¢×¡×§×”) -->
                        <rect x="105" y="75" width="35" height="30" fill="#ff9800" rx="3"/>
                        <rect x="110" y="80" width="8" height="6" fill="white" rx="1"/>
                        <rect x="122" y="80" width="8" height="6" fill="white" rx="1"/>
                    </svg>
                </div>
                <div>
                    <h1>ğŸ§­ ×”××¦×¤×Ÿ ×”×ª×¢×¡×•×§×ª×™</h1>
                </div>
            </div>
            <p class="subtitle">××‘×—×•×Ÿ ×§×¨×™×™×¨×” ×—×›× ×”××•×¤×¢×œ ×‘-AI</p>
        </header>

        <nav>
            <button class="nav-btn active" data-section="diagnosis">ğŸ¯ ××‘×—×•×Ÿ ×ª×¢×¡×•×§×ª×™</button>
            <button class="nav-btn" data-section="cv" disabled title="×‘×§×¨×•×‘">ğŸ“„ ×§×•×¨×•×ª ×—×™×™×</button>
            <button class="nav-btn" data-section="jobs" disabled title="×‘×§×¨×•×‘">ğŸ” ×—×™×¤×•×© ××©×¨×•×ª</button>
        </nav>

        <div class="content">
            <!-- API Key Setup -->
            <div class="api-key-section" id="apiSection">
                <label for="apiKey">ğŸ”‘ ×”×“×‘×§ ××ª API Key ×©×œ OpenAI:</label>
                <input type="password" id="apiKey" placeholder="sk-proj-..." value="">
                <button class="btn btn-secondary" onclick="saveApiKey()" style="margin-top: 10px; width: auto; max-width: 150px;">×©××•×¨ ××¤×ª×—</button>
                <div id="apiStatus" style="margin-top: 10px; font-size: 0.9em; color: #666;"></div>
            </div>

            <!-- Diagnosis Section -->
            <div class="section active" id="diagnosis">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="step-indicator" id="stepIndicator">×©×œ×‘ 1 ××ª×•×š 9</div>
                <div class="error-message" id="errorMessage"></div>
                <div class="success-message" id="successMessage"></div>

                <form id="diagnosisForm">
                    <!-- Step 1: Basic Info -->
                    <div class="form-step" data-step="1">
                        <h2>ğŸ“‹ ××™×“×¢ ×‘×¡×™×¡×™</h2>
                        <div class="form-group">
                            <label>×©× (××•×¤×¦×™×•× ×œ×™):</label>
                            <input type="text" id="name" placeholder="×”×©× ×©×œ×š">
                        </div>
                        <div class="form-group">
                            <label>××’×“×¨:</label>
                            <select id="gender">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="male">×’×‘×¨</option>
                                <option value="female">××™×©×”</option>
                                <option value="other">××—×¨</option>
                                <option value="prefer_not">××¢×“×™×£ ×œ× ×œ×¦×™×™×Ÿ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>×˜×•×•×— ×’×™×œ:</label>
                            <select id="age">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="18-25">18-25</option>
                                <option value="26-35">26-35</option>
                                <option value="36-45">36-45</option>
                                <option value="46-55">46-55</option>
                                <option value="56+">56 ×•××¢×œ×”</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>×¢×™×¨/××–×•×¨:</label>
                            <input type="text" id="location" placeholder="×¢×™×¨ ×©×œ ××’×•×¨×™×">
                        </div>
                    </div>

                    <!-- Step 2: Cognitive Abilities -->
                    <div class="form-step" data-step="2" style="display: none;">
                        <h2>ğŸ§  ×™×›×•×œ×•×ª ×§×•×’× ×™×˜×™×‘×™×•×ª</h2>
                        <p style="margin-bottom: 20px; color: #666;">×“×¨×’ ××ª ×¢×¦××š ×-1 (×—×œ×©) ×œ-10 (××¢×•×œ×”)</p>
                        <div class="form-group">
                            <label>×—×©×™×‘×” ×›××•×ª×™×ª (××¡×¤×¨×™× ×•× ×ª×•× ×™×): <span id="q1Val">5</span>/10</label>
                            <input type="range" id="q1" min="1" max="10" value="5" oninput="document.getElementById('q1Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>×—×©×™×‘×” ××™×œ×•×œ×™×ª (×›×ª×™×‘×” ×•×§×¨×™××”): <span id="q2Val">5</span>/10</label>
                            <input type="range" id="q2" min="1" max="10" value="5" oninput="document.getElementById('q2Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>×—×©×™×‘×” ×—×–×•×ª×™×ª-××¨×—×‘×™×ª (×¢×™×¦×•×‘ ×•×¦×•×¨×•×ª): <span id="q3Val">5</span>/10</label>
                            <input type="range" id="q3" min="1" max="10" value="5" oninput="document.getElementById('q3Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>×—×©×™×‘×” ×˜×›× ×™×ª-××›× ×™×ª (×”× ×“×¡×”): <span id="q4Val">5</span>/10</label>
                            <input type="range" id="q4" min="1" max="10" value="5" oninput="document.getElementById('q4Val').innerText = this.value">
                        </div>
                    </div>

                    <!-- Step 3: Achievements -->
                    <div class="form-step" data-step="3" style="display: none;">
                        <h2>ğŸ† ×”×™×©×’×™× ××¨×›×–×™×™×</h2>
                        <div class="form-group">
                            <label>×ª××¨ ××ª 3 ×”×”×™×©×’×™× ×”×—×©×•×‘×™× ×‘×™×•×ª×¨ ×©×œ×š:</label>
                            <textarea id="achievements" rows="6" placeholder="×œ×“×•×’××”: ×”×•×‘×œ×ª×™ ×¤×¨×•×™×§×˜ ×©×”×’×‘×™×œ ×¢×œ×•×™×•×ª ×‘-30%, ×•×¢×“ ×× ×©×™× ×‘×ª×—×•× ×”×˜×›× ×•×œ×•×’×™×”..."></textarea>
                        </div>
                    </div>

                    <!-- Step 4: Hobbies -->
                    <div class="form-step" data-step="4" style="display: none;">
                        <h2>ğŸ® ×ª×—×‘×™×‘×™× ×•×—×•××¨×™× ×¢× ×™×™×Ÿ</h2>
                        <div class="form-group">
                            <label>××™×œ×• ×ª×—×‘×™×‘×™× ××• ×ª×—×•××™ ×¢× ×™×™×Ÿ ×™×© ×œ×š? (×¤×¨×˜ ×›××” ×©××¤×©×¨)</label>
                            <textarea id="hobbies" rows="6" placeholder="×œ×“×•×’××”: ×× ×™ ××•×”×‘ ×œ×¢×©×•×ª ×§×•×“, ×× ×™ ××ª×—×§×” ××—×¨×™ ×§×××¨×”, ×× ×™ ×’× ××¢×•× ×™×™×Ÿ ×‘×¢×™×¦×•×‘..."></textarea>
                        </div>
                    </div>

                    <!-- Step 5: Holland RIASEC -->
                    <div class="form-step" data-step="5" style="display: none;">
                        <h2>ğŸ’¼ ×¡×’× ×•×Ÿ ×¢×‘×•×“×” (Holland)</h2>
                        <p style="margin-bottom: 20px; color: #666;">×“×¨×’ ××ª ×›×œ 6 ×”×ª×—×•××™× ×œ×¤×™ ×¢× ×™×™×Ÿ:</p>
                        <div class="form-group">
                            <label>Realistic (××¢×©×™-×˜×›× ×™): <span id="r1Val">5</span>/10</label>
                            <input type="range" id="r1" min="1" max="10" value="5" oninput="document.getElementById('r1Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>Investigative (×—×§×¨× ×™-××“×¢×™): <span id="r2Val">5</span>/10</label>
                            <input type="range" id="r2" min="1" max="10" value="5" oninput="document.getElementById('r2Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>Artistic (×™×¦×™×¨×ª×™): <span id="r3Val">5</span>/10</label>
                            <input type="range" id="r3" min="1" max="10" value="5" oninput="document.getElementById('r3Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>Social (×—×‘×¨×ª×™-×¢×•×–×¨): <span id="r4Val">5</span>/10</label>
                            <input type="range" id="r4" min="1" max="10" value="5" oninput="document.getElementById('r4Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>Enterprising (×™×–××™-×× ×”×™×’×•×ª×™): <span id="r5Val">5</span>/10</label>
                            <input type="range" id="r5" min="1" max="10" value="5" oninput="document.getElementById('r5Val').innerText = this.value">
                        </div>
                        <div class="form-group">
                            <label>Conventional (×©×™×˜×ª×™-××¨×’×•× ×™): <span id="r6Val">5</span>/10</label>
                            <input type="range" id="r6" min="1" max="10" value="5" oninput="document.getElementById('r6Val').innerText = this.value">
                        </div>
                    </div>

                    <!-- Step 6: Work Style -->
                    <div class="form-step" data-step="6" style="display: none;">
                        <h2>ğŸ¢ ×¢×“×¤×•×ª ×¡×‘×™×‘×ª ×¢×‘×•×“×”</h2>
                        <div class="form-group">
                            <label>×¡×‘×™×‘×ª ×¢×‘×•×“×” ××•×¢×“×¤×ª:</label>
                            <select id="workEnv">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="solo">×¢×‘×•×“×” ×¢×¦×××™×ª</option>
                                <option value="small">×¦×•×•×ª ×§×˜×Ÿ (2-5 ×× ×©×™×)</option>
                                <option value="medium">×¦×•×•×ª ×‘×™× ×•× ×™ (6-20)</option>
                                <option value="large">××¨×’×•×Ÿ ×’×“×•×œ (20+)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>×§×¦×‘ ×¢×‘×•×“×” ××•×¢×“×£:</label>
                            <select id="pace">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="fast">××”×™×¨ ×•×“×™× ××™</option>
                                <option value="balanced">×××•×–×Ÿ</option>
                                <option value="slow">××™×˜×™ ×•××ª×•×Ÿ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>××§×•× ×¢×‘×•×“×”:</label>
                            <select id="location2">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="office">××©×¨×“</option>
                                <option value="remote">×¢×‘×•×“×” ××”×‘×™×ª</option>
                                <option value="hybrid">×”×™×‘×¨×™×“×™</option>
                                <option value="field">×¢×‘×•×“×” ×‘×©×˜×—</option>
                            </select>
                        </div>
                    </div>

                    <!-- Step 7: Values & Constraints -->
                    <div class="form-step" data-step="7" style="display: none;">
                        <h2>ğŸ’° ×¢×¨×›×™× ×•×”×’×‘×œ×•×ª</h2>
                        <div class="form-group">
                            <label>×˜×•×•×— ×”×›× ×¡×” ××©×•×¢×¨ (×‘×©×§×œ×™× ×—×•×“×©×™×™×):</label>
                            <select id="salary">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="5000-8000">5,000-8,000</option>
                                <option value="8000-12000">8,000-12,000</option>
                                <option value="12000-18000">12,000-18,000</option>
                                <option value="18000-25000">18,000-25,000</option>
                                <option value="25000+">25,000 ×•××¢×œ×”</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>×¢×“×™×¤×•×™×•×ª ×‘×§×¨×™×™×¨×”:</label>
                            <select id="careerPriority">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="growth">×§×™×“×•× ×•×ª×¢×œ×™×™×”</option>
                                <option value="mastery">×©×œ×™×˜×” ×‘××§×¦×•×¢</option>
                                <option value="impact">×”×©×¤×¢×” ×•×—×©×™×‘×•×ª</option>
                                <option value="balance">××™×–×•×Ÿ ×—×™×™×-×¢×‘×•×“×”</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>××•×›× ×•×ª ×œ×”×©×§×¢×” ×‘×”×›×©×¨×” (×‘×©×§×œ×™×):</label>
                            <select id="trainingBudget">
                                <option value="">-- ×‘×—×¨ --</option>
                                <option value="0">××™×Ÿ ×ª×§×¦×™×‘</option>
                                <option value="1000-5000">1,000-5,000</option>
                                <option value="5000-10000">5,000-10,000</option>
                                <option value="10000+">10,000 ×•××¢×œ×”</option>
                            </select>
                        </div>
                    </div>

                    <!-- Step 8: Future Aspirations -->
                    <div class="form-step" data-step="8" style="display: none;">
                        <h2>ğŸŒŸ ×©××™×¤×•×ª ×¢×ª×™×“×™×•×ª</h2>
                        <div class="form-group">
                            <label>××™×¤×” ××ª×” ×¨×•×¦×” ×œ×”×™×•×ª ×‘×¢×•×“ 5 ×©× ×™× ××§×¦×•×¢×™×ª?</label>
                            <textarea id="aspirations" rows="4" placeholder="×ª××¨ ××ª ×”×—×–×•×Ÿ ×©×œ×š..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>××™×œ×• ××ª×’×¨×™× ×—×•×¡××™× ××•×ª×š ×›×¨×’×¢?</label>
                            <textarea id="blockers" rows="4" placeholder="×ª××¨ ××ª ×”××’×‘×œ×•×ª..."></textarea>
                        </div>
                    </div>

                    <!-- Step 9: Review -->
                    <div class="form-step" data-step="9" style="display: none;">
                        <h2>âœ… ×‘×“×•×§ ××ª ×”×ª×©×•×‘×•×ª ×©×œ×š</h2>
                        <p style="margin-bottom: 20px; color: #667eea; font-weight: 600;">×œ×¤× ×™ ×©××ª×” ××’×™×©, ×•×•×“× ×©×”×›×œ × ×›×•×Ÿ.</p>
                        <div id="reviewSummary" style="background: #f8f9fa; padding: 20px; border-radius: 10px; line-height: 1.8;"></div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">â† ×”×§×•×“×</button>
                        <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">×”×‘× â†’</button>
                    </div>
                </form>
            </div>

            <!-- CV Section -->
            <div class="section" id="cv">
                <div class="coming-soon">
                    <h2>ğŸ“„ ×‘× ×™×™×” ×•×©×“×¨×•×’ ×§×•×¨×•×ª ×—×™×™×</h2>
                    <p>ğŸš€ ×”××•×“×•×œ ×”×–×” ×‘×§×¨×•×‘!</p>
                    <p style="margin-top: 20px; color: #333;">×ª×•×›×œ:</p>
                    <p>âœ… ×œ×”×¢×œ×•×ª ×§×•"×— ×§×™×™×</p>
                    <p>âœ… ×œ×¢×¨×•×š ×¢× ×¢×–×¨×ª AI</p>
                    <p>âœ… ×œ×™×¦×•×¨ ×¤×•×¨××˜×™× ×©×•× ×™×</p>
                    <p>âœ… ×œ×§×‘×œ × ×™×ª×•×— Gap Analysis</p>
                </div>
            </div>

            <!-- Jobs Section -->
            <div class="section" id="jobs">
                <div class="coming-soon">
                    <h2>ğŸ” ×—×™×¤×•×© ××©×¨×•×ª ×•×”×ª×××”</h2>
                    <p>ğŸš€ ×”××•×“×•×œ ×”×–×” ×‘×§×¨×•×‘!</p>
                    <p style="margin-top: 20px; color: #333;">×ª×•×›×œ:</p>
                    <p>âœ… ×œ×—×¤×© ××©×¨×•×ª ××•×ª×××•×ª</p>
                    <p>âœ… ×œ×§×‘×œ ×¦×™×•×Ÿ ×”×ª×××”</p>
                    <p>âœ… ×œ×”×‘×™×Ÿ ×œ××” ×–×• ××©×¨×” ×˜×•×‘×” ×‘×©×‘×™×œ×š</p>
                    <p>âœ… ×œ×§×‘×œ ×”××œ×¦×•×ª × ×•×¡×¤×•×ª</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 9;
        let apiKey = localStorage.getItem('openai_api_key') || '';

        function saveApiKey() {
            const key = document.getElementById('apiKey').value.trim();
            if (!key) {
                showError('×× × ×”×“×‘×§ ××ª ×”-API Key');
                return;
            }
            if (!key.startsWith('sk-')) {
                showError('××¤×ª×— ×œ× ×ª×§×£ - ×—×™×™×‘ ×œ×”×ª×—×™×œ ×‘-sk-');
                return;
            }
            localStorage.setItem('openai_api_key', key);
            showSuccess('âœ… ×”××¤×ª×— ×©××•×¨ ×‘×”×¦×œ×—×”!');
            apiKey = key;
        }

        function showError(msg) {
            const el = document.getElementById('errorMessage');
            el.innerText = msg;
            el.classList.add('show');
            setTimeout(() => el.classList.remove('show'), 5000);
        }

        function showSuccess(msg) {
            const el = document.getElementById('successMessage');
            el.innerText = msg;
            el.classList.add('show');
            setTimeout(() => el.classList.remove('show'), 5000);
        }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('stepIndicator').innerText = `×©×œ×‘ ${currentStep} ××ª×•×š ${totalSteps}`;
        }

        function showStep(step) {
            document.querySelectorAll('.form-step').forEach(el => el.style.display = 'none');
            document.querySelector(`[data-step="${step}"]`).style.display = 'block';
            document.getElementById('prevBtn').style.display = step === 1 ? 'none' : 'block';
            document.getElementById('nextBtn').innerText = step === totalSteps ? '×¦×•×¨ ×“×•"×— â†’' : '×”×‘× â†’';
            updateProgress();

            if (step === totalSteps) {
                generateReview();
            }
        }

        function nextStep() {
            if (currentStep === totalSteps) {
                generateReport();
            } else {
                currentStep++;
                showStep(currentStep);
                window.scrollTo(0, 0);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                window.scrollTo(0, 0);
            }
        }

        function generateReview() {
            const review = `
                <strong>×©×:</strong> ${document.getElementById('name').value || '×œ× ××™×œ×'} <br>
                <strong>××’×“×¨:</strong> ${document.getElementById('gender').value || '×œ× ×‘×—×¨'} <br>
                <strong>×’×™×œ:</strong> ${document.getElementById('age').value || '×œ× ×‘×—×¨'} <br>
                <strong>×¢×™×¨:</strong> ${document.getElementById('location').value || '×œ× ××™×œ×'} <br>
                <strong>×”×™×©×’×™×:</strong> ${document.getElementById('achievements').value.substring(0, 50)}... <br>
                <strong>×ª×—×‘×™×‘×™×:</strong> ${document.getElementById('hobbies').value.substring(0, 50)}... <br>
            `;
            document.getElementById('reviewSummary').innerHTML = review;
        }

        async function generateReport() {
            if (!apiKey) {
                showError('âŒ ×× × ×”×“×‘×§ ××ª ×”-API Key ×§×•×“×');
                currentStep--;
                showStep(currentStep);
                return;
            }

            const button = document.getElementById('nextBtn');
            button.disabled = true;
            button.innerText = '×™×•×¦×¨ ×“×•"×—...';

            try {
                const data = {
                    gender: document.getElementById('gender').value,
                    age: document.getElementById('age').value,
                    location: document.getElementById('location').value,
                    achievements: document.getElementById('achievements').value,
                    hobbies: document.getElementById('hobbies').value,
                    cognitive: {
                        quantitative: document.getElementById('q1').value,
                        verbal: document.getElementById('q2').value,
                        visual: document.getElementById('q3').value,
                        technical: document.getElementById('q4').value,
                    },
                    holland: {
                        realistic: document.getElementById('r1').value,
                        investigative: document.getElementById('r2').value,
                        artistic: document.getElementById('r3').value,
                        social: document.getElementById('r4').value,
                        enterprising: document.getElementById('r5').value,
                        conventional: document.getElementById('r6').value,
                    },
                    workEnv: document.getElementById('workEnv').value,
                    pace: document.getElementById('pace').value,
                    location2: document.getElementById('location2').value,
                    salary: document.getElementById('salary').value,
                    careerPriority: document.getElementById('careerPriority').value,
                    trainingBudget: document.getElementById('trainingBudget').value,
                    aspirations: document.getElementById('aspirations').value,
                    blockers: document.getElementById('blockers').value,
                };

                const response = await fetch('/.netlify/functions/openai', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ ...data, apiKey }),
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const result = await response.json();
                displayReport(result.report);
                showSuccess('âœ… ×“×•"×— × ×•×¦×¨ ×‘×”×¦×œ×—×”!');

            } catch (error) {
                showError('âŒ ×©×’×™××”: ' + error.message);
                console.error(error);
            } finally {
                button.disabled = false;
                button.innerText = '×¦×•×¨ ×“×•"×— â†’';
            }
        }

        function displayReport(report) {
            const content = document.querySelector('.content');
            content.innerHTML = `
                <div style="margin-bottom: 30px;">
                    <button class="btn btn-secondary" onclick="location.reload()">â† ×—×–×•×¨ ×œ×ª×—×™×œ×”</button>
                    <button class="btn btn-primary" onclick="downloadReport()" style="margin-right: 10px;">â¬‡ï¸ ×”×•×¨×“ ×“×•"×—</button>
                </div>
                <div class="report-container">
                    ${report}
                </div>
            `;
            window.scrollTo(0, 0);
        }

        function downloadReport() {
            const report = document.querySelector('.report-container').innerHTML;
            const html = `<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×“×•"×— ××‘×—×•×Ÿ ×ª×¢×¡×•×§×ª×™</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; direction: rtl; padding: 20px; }
        h1, h2, h3 { color: #667eea; }
    </style>
</head>
<body>
    ${report}
</body>
</html>`;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'diagnostic-report.html';
            a.click();
        }

        // Navigation
        document.querySelectorAll('.nav-btn:not([disabled])').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                const section = e.target.dataset.section;
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(section).classList.add('active');
                if (section === 'diagnosis') {
                    currentStep = 1;
                    showStep(1);
                }
            });
        });

        // Initialize
        showStep(1);
        if (apiKey) {
            document.getElementById('apiKey').value = apiKey.substring(0, 15) + '...';
            document.getElementById('apiStatus').innerText = 'âœ… ××¤×ª×— ×˜×¢×•×Ÿ';
        }
    </script>
</body>
</html>
